<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="./resources/css/homePage.css">
        <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Caveat:700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Manrope&display=swap" rel="stylesheet">
    </head>
    <script>
        angular.module('homeApp', [])
            .controller('homeController', ['$scope', '$http', function($scope, $http){
                $scope.checkStatus = function(){
                    $http.get("/checkStatus").then(function(response){
                        $scope.status = response.data.status;
                        console.log($scope.status);
                        if($scope.status == null){
                            document.getElementById("account").style.display = "none";
                            document.getElementById("out").style.display = "none";
                        }
                        else{
                            document.getElementById("log").style.display = "none";
                            document.getElementById("sign").style.display = "none";
                        }

                    });
                }
                
                $scope.join = function(){
                    //alert("hello");
                    var code = document.getElementById("search").value;
                    if(code == ""){
                        alert("Please enter your code to continue...");
                    }
                    else{
                        $scope.code = {
                            joinCode: code,
                        }
                        $http.post("/joinGroup", $scope.code).then(function(response){
                            console.log("joining playlist...");
                        });
                        location.replace('./player');
                    }
                    
                }
            }]);
    </script>
    <body ng-app="homeApp" ng-controller="homeController">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="/"><img id="piclogo" src="./resources/playtwist_white.png" width="100" height="100" class="d-inline-block align-top"
                draggable="false" alt="PlayTwist logo" /></a>
            <!-- <button id="nav_button" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button> -->
            <!-- <div class="collapse navbar-collapse" id="navbarNavAltMarkup"> -->
            <div id="navbarNavAltMarkup">
              <div class="navbar-nav">
                <!-- <a id="link" class="nav-item nav-link active" href="./homePage.html">Home <span class="sr-only">(current)</span></a> -->
                <!-- <a id="link" class="nav-item nav-link" href="#">Join a Playlist</a> -->
                <a id="log" class="nav-item nav-link Nav" href="./login" data-ng-init="checkStatus();">Login</a>
                <a id="sign" class="nav-item nav-link Nav" href="./login">Sign Up</a>
                <a id="account" class="nav-item nav-link Nav" href="/user">Account</a>
                <a id="out" class="nav-item nav-link Nav" href="/">Sign Out</a>
              </div>
            </div>
          </nav>
        <div class="container">
            <div id="main" class="row">
                <div class="col-lg-12">
                    <!-- <form class="join" action="./player"> -->
                    <form class="join">
                        <input id="search" type="text" placeholder="Search..." name="search">
                        <input id="search_button" type="submit" value="Join a Playlist" ng-click="join();">
                    </form>
                    <h1 id="slogan">The most collaborative music application known to man</h1>
                </div>
            </div>
            <div id="below_main" class="row">
                <div class="col-sm">
                    <img id="display_img" src="./resources/pop.jpg">
                    <br/>
                    <p>Best of Pop</p>   
                </div>
                <div class="col-sm">
                    <img id="display_img" src="./resources/country.jpg">
                    <br/>
                    <p>Best of Country</p>
                </div>
                <div class="col-sm">
                    <img id="display_img" src="./resources/hiphop.jpg">
                    <br/>
                    <p>Best of Hip-Hop</p>

                </div>
                <div class="col-sm">
                    <img id="display_img" src="./resources/classical.jpg">
                    <br/>
                    <p>Best of Classical</p>

                </div>
            </div>
        </div>
    </body>
</html>
